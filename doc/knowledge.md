# 期货合约知识
期货合约与现货交易不同。
现货交易下单后一种币减少，另一种币增加。  
期货合约下单后，锁定一部分定价币(USDT)，其他币余额不变。盈利和亏损会立刻反馈到定价币的钱包余额上。  

名义价值USDT=合约张数 * 合约乘数 * 标记价格  
币本位名义价值=合约张数 * 合约乘数 / 标记价格  
初始保证金=名义价值 / 杠杆  
费率(币安)：maker万2，taker万4  
订单手续费=名义价值*费率

### 强制平仓  

**何时强制平仓？**  
* 保证金比率达到100%强平（应保持在80%以下）  
* 或价格达到强平价格  

**保证金比率**  
保证金比率： (仓位名义价值 * 维持保证金率 - 维持保证金速算数) / (钱包余额 + 未实现盈亏)  
钱包余额 = 初始净划入余额（含初始保证金） + 已实现盈亏 + 净资金费用 - 手续费

**强平价格**  
强平价格 = (可用余额 + 本订单保证金 - 名义价值) / 撬动数量(负)  
撬动数量(负) = (仓位数量 * (维持保证金率- 1))  

### 合约订单盈亏  
订单盈亏 = 合约方向 * 名义持仓数量 * (出场价格 - 进场价格) - 手续费  
合约方向 = 多单：1  空单：-1  
合约的盈亏会立刻反馈到钱包余额上面，可以用于开其他的订单  
可下单余额 = 钱包余额 + 未实现盈亏 - 初始保证金  
> 币安合约订单盈亏的文档计算公式是错误的，以币安模拟计算器为准

### 期货合约下单知识
期货合约可以做多，也可以做空，主要涉及四种：开多，开空，平多，平空。  
双向持仓时，开单必填`positionSide`，值LONG或SHORT表示多单还是空单。再side结合表示上面四种操作。  
一个币种，一个方向，只允许一个持仓记录，如果有多个会合并为1个。  
杠杆倍数修改后，不光影响后续的开单，已有的头寸杠杆倍数也会立刻被修改。  
修改杠杆倍数后，已有仓位USD不变，对应保证金会变化。  
